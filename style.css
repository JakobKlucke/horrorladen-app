:root{
  --green:#58CC02; --green2:#8EE000; --green-dark:#1FAF38;
  --blue:#1CB0F6; --blue-dark:#1899D6;
  --ink:#2F2F2F; --muted:#6F6F6F; --bg:#F6F7FB; --paper:#fff;
  --ring:rgba(88,204,2,.35); --shadow:0 12px 30px rgba(0,0,0,.10);
  --radius:20px; --ease:cubic-bezier(.2,.8,.2,1);
}
html{height:100dvh;background:var(--bg);-webkit-text-size-adjust:100%}
body{margin:0;height:100dvh;display:flex;flex-direction:column;font-family:Inter,ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg);overflow:hidden;touch-action:manipulation}
*{-webkit-tap-highlight-color:transparent;box-sizing:border-box}

/* Header */
header{position:sticky;top:0;z-index:40;padding-top:env(safe-area-inset-top);backdrop-filter:saturate(120%) blur(10px);background:linear-gradient(180deg,rgba(255,255,255,.92),rgba(255,255,255,.78));border-bottom:1px solid #00000010}
.wrap{max-width:64rem;margin:0 auto;padding:12px}
main.wrap{flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;padding-bottom:12px}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:.8rem .25rem}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,var(--green),var(--green2));display:grid;place-items:center;box-shadow:var(--shadow);transition:transform .2s var(--ease)}
.logo:active{transform:scale(.94)}
.title{font-family:Nunito,Inter,sans-serif;font-weight:900;font-size:clamp(1.1rem,2.4vw,1.35rem);color:var(--ink)}
.badge{font-size:.82rem;padding:.25rem .65rem;border-radius:999px;background:#8ee00029;color:#0D6A00;font-weight:800}
.top-actions{display:flex;gap:.5rem}
.iconbtn{min-width:44px;min-height:44px;border-radius:14px;border:2px solid #00000010;background:linear-gradient(180deg,#fff,#F5FFF0);box-shadow:var(--shadow);font-size:18px;display:grid;place-items:center;cursor:pointer;transition:transform .12s var(--ease), box-shadow .2s var(--ease)}
.iconbtn:hover{transform:translateY(-1px); box-shadow:0 16px 28px rgba(0,0,0,.12)}
.iconbtn:active{transform:translateY(0) scale(.98)}
.compact .logo{width:36px;height:36px;border-radius:10px}
.compact .title{font-size:1.05rem}

/* Panels / Inputs */
.panel{background:linear-gradient(180deg,#fff,#F8FFF4);border:2px solid #00000010;border-radius:var(--radius);padding:1rem;box-shadow:var(--shadow);animation:enter .32s var(--ease)}
label{font-size:.95rem;color:var(--muted);display:block;margin-bottom:.35rem}
select,input[type=text]{width:100%;min-height:48px;padding:.85rem 1rem;border-radius:16px;border:2px solid #00000020;background:#fff;color:var(--ink);outline:none;transition:transform .12s var(--ease),border-color .2s var(--ease),box-shadow .2s var(--ease)}
select:focus,input:focus{border-color:var(--green);box-shadow:0 0 0 6px var(--ring);transform:translateY(-1px)}

.filters{display:grid;gap:.6rem;margin:.6rem 0}
@media (min-width:760px){.filters{grid-template-columns:repeat(4,1fr)}}
.controls{display:grid;gap:.75rem;grid-template-columns:1fr 1fr;align-items:end}
@media (min-width:760px){.controls{grid-template-columns:1fr 1fr auto}}
.controls .cta{display:flex;justify-content:flex-end}

.bar{display:flex;align-items:center;gap:.8rem;margin:.8rem 0}
.progress{height:8px;border-radius:999px;background:#e6e9ef;overflow:hidden;flex:1}
.progress>i{display:block;height:100%;width:0;background:linear-gradient(90deg,#8EE000,#58CC02);transition:width .25s var(--ease)}
.faded{opacity:.9;color:var(--muted);font-size:.96rem}

/* Duolingo-like Buttons */
.btn{
  position:relative; appearance:button; background-color: var(--green); border: solid transparent;
  border-radius: 16px; border-width: 0 0 4px; color:#0b1220; cursor:pointer; display:inline-block;
  font-size:15px; font-weight:800; letter-spacing:.8px; line-height:20px; padding:13px 19px;
  text-transform:uppercase; transition:filter .2s, transform .08s var(--ease);
  user-select:none; -webkit-user-select:none; white-space:nowrap; box-sizing:border-box;
}
.btn:after{
  background-clip:padding-box; background-color: var(--green2);
  border: solid transparent; border-radius:16px; border-width:0 0 4px;
  content:""; position:absolute; inset:0; bottom:-4px; z-index:-1;
}
.btn:hover:not(:disabled){ filter:brightness(1.06) }
.btn:active:after{ border-width:0 }
.btn:active{ padding-bottom:10px; transform:translateY(2px) }
.btn:disabled{opacity:.5; cursor:default}
.btn.secondary{ background:#fff; color:var(--ink); border:2px solid #00000014; text-transform:none; letter-spacing:.2px }
.btn.secondary:after{display:none}
.btn.secondary:hover{transform:translateY(-1px); box-shadow:0 10px 20px rgba(0,0,0,.1)}

.card{--border-radius:22px;width:min(100%,42rem);padding:1.1rem;border-radius:var(--border-radius);background:#fff;border:2px solid #00000010;box-shadow:var(--shadow);margin:1rem auto;position:relative;color:var(--ink)}
.exchange{margin:1rem 0;padding:1rem;border-radius:18px;background:#fff;border:2px solid #00000010;color:var(--ink);transition:transform .12s var(--ease), box-shadow .2s var(--ease)}
.exchange:hover{transform:translateY(-1px); box-shadow:0 12px 24px rgba(0,0,0,.08)}
.line{padding:.85rem 1rem;border-radius:14px;background:linear-gradient(180deg,#F2FFF2,#E9FFE0);border:2px solid rgba(37,168,0,.25);color:var(--ink)}
.big{font-size:clamp(1.05rem,2.7vw,1.25rem);line-height:1.6;word-break:break-word;overflow-wrap:anywhere;color:var(--ink)}
.list{max-width:42rem;margin:0 auto}

/* Viewer – nur eine Kante & klare Hervorhebung */
[data-view="viewer"] .exchange{border:0;background:transparent;box-shadow:none;padding:.35rem 0}
[data-view="viewer"] .line{border-radius:16px;border:2px solid #e6e9ef;background:#f3f4f7;color:#555;font-weight:500}
[data-view="viewer"] .line.hl{
  background:linear-gradient(180deg,#F2FFF2,#E9FFE0);
  border-color:rgba(31,175,56,.35);
  color:#0b1220;
  box-shadow:0 6px 14px rgba(31,175,56,.12);
}
[data-view="viewer"] .line.dim{background:#f1f3f6;border-color:#e3e6ee;color:#6b7280}

/* Flashcards – stabile 3D-Rotation */
.flip{perspective:1200px}
.card-inner{
  position:relative;transform-style:preserve-3d;transition:transform .5s var(--ease);
  min-height:3.2em;display:grid;place-items:center;padding:.4rem .2rem
}
.face,.back{
  position:absolute;inset:0;display:grid;place-items:center;padding:.4rem .2rem;
  -webkit-backface-visibility:hidden;backface-visibility:hidden
}
.back{transform:rotateY(180deg)}
.flipped .card-inner{transform:rotateY(180deg)}

.home-menu{display:grid;gap:.8rem}
@media (min-width:640px){.home-menu{grid-template-columns:1fr 1fr}}
@media (min-width:900px){.home-menu{grid-template-columns:repeat(4,1fr)}}
.tile{display:flex;align-items:center;justify-content:center;gap:.6rem;min-height:64px;padding:.9rem;border-radius:18px;border:2px solid #00000010;background:linear-gradient(180deg,#fff,#F5FFF0);box-shadow:var(--shadow);font-weight:900;color:var(--ink);transition:transform .12s var(--ease), box-shadow .2s var(--ease)}
.tile:hover{transform:translateY(-1px); box-shadow:0 16px 28px rgba(0,0,0,.12)}

.bottom{position:sticky;bottom:0;z-index:35;padding:8px 12px calc(8px + env(safe-area-inset-bottom));background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,.85))}
.bottom-nav{display:grid;grid-template-columns:repeat(1,1fr);gap:.6rem;max-width:20rem;margin:0 auto}
.navbtn{display:grid;place-items:center;height:56px;border-radius:18px;border:2px solid #00000010;background:linear-gradient(180deg,#fff,#F5FFF0);box-shadow:var(--shadow);font-size:20px;color:var(--ink);transition:transform .12s var(--ease), box-shadow .2s var(--ease)}
.navbtn:hover{transform:translateY(-1px); box-shadow:0 16px 28px rgba(0,0,0,.12)}

[data-view]{display:none}[data-view].active{display:block}
@keyframes enter{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* small helpers */
.script-row{display:flex;gap:.6rem;align-items:end;flex-wrap:wrap}
