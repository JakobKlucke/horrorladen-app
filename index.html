<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Horrorladen ‚Äì Lernapp (Modes)</title>
  <meta name="theme-color" content="#0f172a" />
  <style>
    :root{
      --c-lapis:#22577a; --c-verdigris:#38a3a5; --c-emerald:#57cc99; --c-light:#80ed99; --c-tea:#c7f9cc;
      --bg:#0f172a; --panel:#0b1220; --text:#e5f7ef; --muted:#bfe7d3;
      --ios: cubic-bezier(.22,.61,.36,1);
      --shadow: 0 12px 40px rgba(0,0,0,.35);
    }
    html{font-size:16px}
    @media (max-width:380px){ html{font-size:15px} }
    @media (min-width:420px){ html{font-size:clamp(16px,2.2vw,18px)} }
    body{margin:0;min-height:100dvh;background:linear-gradient(180deg,var(--bg),#0a192f);color:var(--text);
         font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Inter,Arial,sans-serif}
    header{position:sticky;top:0;z-index:20;padding-top:env(safe-area-inset-top);
           backdrop-filter:blur(10px);background:color-mix(in srgb,#0b1220 70%,transparent);
           border-bottom:1px solid rgba(199,249,204,.15)}
    .wrap{max-width:60rem;margin:0 auto;padding:12px}
    .title{display:flex;gap:.75rem;align-items:center;padding:.5rem .25rem}
    .logo{width:2.4rem;height:2.4rem;border-radius:.9rem;background:linear-gradient(135deg,var(--c-light),var(--c-emerald));
          display:flex;align-items:center;justify-content:center;color:#0b1220;font-weight:900;box-shadow:var(--shadow)}
    .panel{background:linear-gradient(180deg,rgba(34,87,122,.12),rgba(56,163,165,.08));border:1px solid rgba(199,249,204,.18);
           border-radius:16px;padding:.85rem;box-shadow:var(--shadow)}
    label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:.25rem}
    select,input[type=number],button{width:100%;padding:.85rem 1rem;border-radius:14px;border:1px solid rgba(199,249,204,.28);
           background:rgba(11,18,32,.6);color:var(--text);min-height:48px;outline:none;
           transition:transform .18s var(--ios), box-shadow .25s ease, border-color .25s ease}
    button{font-weight:800;letter-spacing:.01em}
    button.primary{background:linear-gradient(180deg,var(--c-emerald),var(--c-verdigris));color:#0b1220}
    button.secondary{background:rgba(199,249,204,.1)}
    .controls{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:.6rem}
    @media (max-width:720px){ .controls{grid-template-columns:1fr 1fr} }
    .toolbar{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem;align-items:center}
    .pill{display:inline-flex;align-items:center;gap:.45rem;padding:.5rem .75rem;border-radius:999px;
          background:rgba(199,249,204,.08);border:1px solid rgba(199,249,204,.2);font-size:.9rem}
    .mode-tabs{display:flex;gap:.4rem;flex-wrap:wrap;margin-top:.5rem}
    .mode-btn{padding:.55rem .8rem;border-radius:999px;border:1px solid rgba(199,249,204,.25);background:rgba(11,18,32,.5)}
    .mode-btn.active{background:linear-gradient(180deg,var(--c-light),var(--c-emerald));color:#0b1220;border-color:transparent}
    .exchange{margin:1rem 0;padding:1rem;border-radius:16px;background:rgba(34,87,122,.14);border:1px solid rgba(199,249,204,.2);
              animation:cardIn .5s var(--ios) both}
    .ctx,.you{display:grid;gap:.6rem;margin:.45rem 0}
    .line{padding:.8rem .9rem;border-radius:14px;background:rgba(11,18,32,.55);border:1px solid rgba(199,249,204,.2)}
    .line.you{background:rgba(128,237,153,.14);border-color:rgba(128,237,153,.45)}
    .speaker{font-size:.9rem;letter-spacing:.04em;color:var(--c-light)}
    .speaker u{ text-decoration-thickness:2px; text-underline-offset:3px }
    .card{margin:1rem 0;padding:1.2rem;border-radius:18px;background:rgba(11,18,32,.55);border:1px solid rgba(199,249,204,.25);
          text-align:center;min-height:120px;display:flex;flex-direction:column;justify-content:center;gap:.5rem;
          animation:cardIn .5s var(--ios) both}
    .big{font-size:1.05rem;line-height:1.5}
    .faded{opacity:.85;color:var(--muted)}
    .choices{display:grid;gap:.6rem;margin-top:.6rem}
    .choices button{font-size:1rem}
    .hearts{letter-spacing:.2rem}
    .cloze-gap{border-bottom:2px dotted var(--c-light); padding:0 .25rem}
    @keyframes cardIn{from{opacity:0;transform:translateY(8px) scale(.992)}to{opacity:1;transform:none}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <div class="logo">üå±</div>
        <div>
          <div style="font-weight:800;font-size:1.15rem;">Horrorladen ‚Äì Lernapp</div>
          <div class="pill">Mehr Lernmodi</div>
        </div>
      </div>
      <div class="panel">
        <div class="controls">
          <div>
            <label for="roleSel">Rolle</label>
            <select id="roleSel"></select>
          </div>
          <div>
            <label for="sessionSize">Blockgr√∂√üe</label>
            <input id="sessionSize" type="number" min="1" max="25" value="5"/>
          </div>
          <div>
            <label for="toggleStage">B√ºhnenanweisungen</label>
            <select id="toggleStage"><option value="off">Aus</option><option value="on">An</option></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="primary" id="startBtn">Session starten</button>
          </div>
        </div>
        <div class="mode-tabs">
          <button class="mode-btn active" data-mode="classic">Classic</button>
          <button class="mode-btn" data-mode="flash">Flashcards</button>
          <button class="mode-btn" data-mode="cloze">Cloze</button>
          <button class="mode-btn" data-mode="survival">Survival</button>
        </div>
        <div class="toolbar">
          <button class="secondary" id="shareBtn">Link teilen</button>
          <span id="statsPill" class="pill">Bereit</span>
          <span id="scorePill" class="pill">Score: 0</span>
          <span id="heartPill" class="pill hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
        </div>
        <div class="faded" style="margin-top:.4rem">
          ‚ÄûDIE ANDEREN‚Äú wird wie ‚ÄûALLE‚Äú behandelt, ‚ÄûBARAPAPAPA‚Äú ignoriert.
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap" id="root" aria-live="polite"></div>
  </main>

  <footer class="wrap faded" style="margin:1rem 0">Palette: #22577a ¬∑ #38a3a5 ¬∑ #57cc99 ¬∑ #80ed99 ¬∑ #c7f9cc</footer>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script>
    const q = new URLSearchParams(location.search);
    const jsonSrc = q.get('src') || 'script.json';
    const norm = (s) => (s||'').trim().toUpperCase();
    const treatSpeaker = (sp)=>{
      const s = norm(sp);
      if (s==='DIE ANDEREN') return 'ALLE';
      if (s==='BARAPAPAPA' || s==='BARAPAPAPABA') return '__IGNORE__';
      return s;
    };
    const isIncludedForRole = (sp, chosen)=>{
      const s = treatSpeaker(sp), ch = norm(chosen);
      if (!s || s==='__IGNORE__') return false;
      if (s==='ALLE') return true;
      return s===ch;
    };
    function buildExchanges(items, chosenRole){
      const dialogues = items.filter(it=>it.type==='dialogue')
        .map(it=>({...it, speaker: treatSpeaker(it.speaker)}))
        .filter(it=>it.speaker!=='__IGNORE__');
      const exchanges=[]; let i=0, last=-1;
      while(i<dialogues.length){
        const it=dialogues[i];
        if(isIncludedForRole(it.speaker, chosenRole)){
          const context=[];
          for (let j=last+1;j<i;j++){ const pj=dialogues[j]; if(!isIncludedForRole(pj.speaker, chosenRole)) context.push(pj); }
          const yours=[]; let k=i;
          while(k<dialogues.length && isIncludedForRole(dialogues[k].speaker, chosenRole)){ yours.push(dialogues[k]); k++; }
          exchanges.push({idx:exchanges.length, context, yours});
          last=k-1; i=k;
        } else i++;
      }
      return exchanges;
    }
    function el(tag, attrs={}, ...children){
      const n=document.createElement(tag);
      for(const [k,v] of Object.entries(attrs)){
        if(k==='class') n.className=v; else if(k==='html') n.innerHTML=v; else n.setAttribute(k,v);
      }
      for(const c of children){ if(c==null) continue; n.appendChild(typeof c==='string'?document.createTextNode(c):c); }
      return n;
    }
    const root = document.getElementById('root');
    const roleSel = document.getElementById('roleSel');
    const sessionSize = document.getElementById('sessionSize');
    const toggleStage = document.getElementById('toggleStage');
    const startBtn = document.getElementById('startBtn');
    const shareBtn = document.getElementById('shareBtn');
    const statsPill = document.getElementById('statsPill');
    const scorePill = document.getElementById('scorePill');
    const heartPill = document.getElementById('heartPill');
    const modeBtns = Array.from(document.querySelectorAll('.mode-btn'));
    let MODE = q.get('mode') || 'classic';
    let HEARTS = 3, SCORE = 0;

    function setMode(m){
      MODE=m;
      const p=new URLSearchParams(location.search); p.set('mode', m); history.replaceState(null,'',`?${p.toString()}`);
      modeBtns.forEach(b=>b.classList.toggle('active', b.dataset.mode===m));
      // reset survival counters on mode change
      if (MODE!=='survival'){ HEARTS=3; SCORE=0; updateHUD(); }
      render();
    }
    modeBtns.forEach(b=>b.addEventListener('click',()=>setMode(b.dataset.mode)));

    function updateHUD(){ scorePill.textContent = `Score: ${SCORE}`; heartPill.textContent = '‚ù§Ô∏è'.repeat(HEARTS) + 'üñ§'.repeat(3-HEARTS); }

    function groupRoles(data){
      const seen=new Set(), roles=[];
      if (data.roles_meta && Array.isArray(data.roles_meta.roles)){
        for (const r of data.roles_meta.roles){
          const name=norm(r.name); if (name&&!seen.has(name)){seen.add(name); roles.push(name);}
          if (Array.isArray(r.aliases)) for (const a of r.aliases){ const an=norm(a); if (an&&!seen.has(an)){seen.add(an); roles.push(an);} }
        }
      } else {
        for (const it of data.items||[]) if (it.type==='dialogue' && it.speaker){ const s=norm(it.speaker); if (!seen.has(s)){seen.add(s); roles.push(s);} }
      }
      if (!seen.has('ALLE')) roles.push('ALLE');
      roles.sort((a,b)=>{
        const pr=['SEYMOUR','AUDREY','MR. MUSHNIK','ORIN','DIE PFLANZE']; const ia=pr.indexOf(a), ib=pr.indexOf(b);
        if (ia!==-1 || ib!==-1) return (ia===-1?999:ia)-(ib===-1?999:ib);
        return a.localeCompare(b);
      });
      return roles.filter(r=>r!=='ALLE');
    }

    function escapeHtml(s){ return (s||'').replace(/[&<>"]/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }
    function renderLine(line, isYou){
      const wrap=el('div',{class:'line'+(isYou?' you':'')});
      const spk=el('div',{class:'speaker'}); spk.innerHTML=`<u>${escapeHtml(line.speaker||'')}</u>`;
      const txt=el('div'); txt.innerHTML=escapeHtml(line.text).replace(/\n/g,'<br/>');
      wrap.append(spk, txt); return wrap;
    }

    function sample(array){ return array[Math.floor(Math.random()*array.length)]; }
    function wordsOf(text){
      // simple split ignoring punctuation
      return (text||'').split(/(\s+|[.,;:!?]+)/).filter(x=>x && !/[.,;:!?]+/.test(x));
    }
    function makeCloze(text, ratio=.35){
      const ws = wordsOf(text);
      if (ws.length<4) return { html: escapeHtml(text), gaps:[] };
      const toHide = Math.max(1, Math.floor(ws.length*ratio));
      const idxs = new Set();
      // prefer longer words
      const order = ws.map((w,i)=>({i,w})).sort((a,b)=>b.w.length-a.w.length).map(o=>o.i);
      for (let i=0;i<order.length && idxs.size<toHide;i++){ if (ws[order[i]].length>=3) idxs.add(order[i]); }
      const gaps=[];
      const out = ws.map((w,i)=> idxs.has(i) ? (gaps.push(w), `<span class="cloze-gap">${' '.repeat(Math.max(3, Math.min(12,w.length)))}</span>`) : escapeHtml(w));
      return { html: out.join(' '), gaps };
    }

    function renderClassic(ex, N, page){
      const pages = Math.max(1, Math.ceil(ex.length / N));
      const start = Math.min(page, pages-1) * N;
      const slice = ex.slice(start, start+N);
      statsPill.textContent = `${ex.length} Bl√∂cke`;
      root.innerHTML='';
      // nav
      const navTop=el('div',{class:'toolbar'},
        el('button',{class:'secondary',id:'prev'},'‚Üê Zur√ºck'),
        el('span',{class:'pill'},`Seite ${page+1} / ${pages}`),
        el('button',{class:'secondary',id:'next'},'Weiter ‚Üí')
      ); root.appendChild(navTop);
      slice.forEach(block=>{
        const box=el('div',{class:'exchange'});
        if (block.context.length){ const ctx=el('div',{class:'ctx'}); block.context.forEach(l=>ctx.appendChild(renderLine(l,false))); box.appendChild(ctx); }
        if (block.yours.length){ const you=el('div',{class:'you'}); block.yours.forEach(l=>you.appendChild(renderLine(l,true))); box.appendChild(you); }
        root.appendChild(box);
      });
      const navBot=navTop.cloneNode(true); root.appendChild(navBot);
      const setPage=(p)=>{ const P=new URLSearchParams(location.search); P.set('page',String(p)); history.replaceState(null,'',`?${P.toString()}`); render(); };
      root.querySelectorAll('#prev').forEach(b=>b.addEventListener('click',()=>setPage(Math.max(0,page-1))));
      root.querySelectorAll('#next').forEach(b=>b.addEventListener('click',()=>setPage(Math.min(pages-1,page+1))));
    }

    function renderFlash(ex){
      // queue of your lines (flattened)
      const pool = ex.flatMap(b=>b.yours);
      let i = 0;
      statsPill.textContent = `${pool.length} Karten`;
      root.innerHTML='';
      const card = el('div',{class:'card'});
      const head = el('div',{class:'faded'},'Tippe zum Aufdecken');
      const body = el('div',{class:'big', id:'fcBody'},'');
      const meta = el('div',{class:'faded', id:'fcMeta'},'');
      card.append(head, body, meta);
      const bar = el('div',{class:'toolbar'},
        el('button',{class:'secondary',id:'prev'},'‚Üê'),
        el('span',{class:'pill',id:'counter'},''),
        el('button',{class:'secondary',id:'next'},'‚Üí')
      );
      root.append(card, bar);

      let revealed=false;
      function show(){
        if (pool.length===0){ body.textContent='Keine Daten'; return; }
        const it = pool[i];
        revealed=false;
        body.textContent = it.speaker + ' ‚Äì (verborgen)';
        meta.textContent = 'Kontext anzeigen? Tippen‚Ä¶';
      }
      function reveal(){
        const it = pool[i];
        body.innerHTML = `<b>${escapeHtml(it.speaker||'')}</b><br>${escapeHtml(it.text).replace(/\n/g,'<br/>')}`;
        meta.textContent = 'Tippe um zu verstecken / Pfeile zum Wechsel';
      }
      function updateCounter(){ document.getElementById('counter').textContent = `${i+1} / ${pool.length}`; }
      function next(){ i = (i+1) % pool.length; show(); updateCounter(); }
      function prev(){ i = (i-1+pool.length)%pool.length; show(); updateCounter(); }
      card.addEventListener('click',()=>{ revealed ? show() : reveal(); revealed=!revealed; });
      document.getElementById('next').addEventListener('click', next);
      document.getElementById('prev').addEventListener('click', prev);
      show(); updateCounter();
    }

    function renderCloze(ex){
      // take your lines, turn into cloze tasks
      const pool = ex.flatMap(b=>b.yours).filter(l=>(l.text||'').split(' ').length>=4);
      let i = 0;
      statsPill.textContent = `${pool.length} Cloze-Aufgaben`;
      root.innerHTML='';
      const card = el('div',{class:'card'});
      const head = el('div',{class:'faded'},'L√ºcken f√ºllen (visuell)');
      const body = el('div',{class:'big', id:'czBody'},'');
      const meta = el('div',{class:'faded', id:'czMeta'},'');
      const revealBtn = el('button',{class:'primary', id:'reveal'},'L√∂sung zeigen');
      card.append(head, body, meta, revealBtn);
      const bar = el('div',{class:'toolbar'},
        el('button',{class:'secondary',id:'prev'},'‚Üê'),
        el('span',{class:'pill',id:'counter'},''),
        el('button',{class:'secondary',id:'next'},'‚Üí')
      );
      root.append(card, bar);

      function renderItem(){
        if (!pool.length){ body.textContent='Keine Daten'; return; }
        const it = pool[i];
        const {html, gaps} = makeCloze(it.text, .35);
        body.innerHTML = `<div class="faded">${escapeHtml(it.speaker||'')}</div>` + html;
        meta.textContent = `versteckte W√∂rter: ${gaps.length}`;
      }
      function reveal(){
        const it = pool[i];
        body.innerHTML = `<b>${escapeHtml(it.speaker||'')}</b><br>${escapeHtml(it.text).replace(/\n/g,'<br/>')}`;
      }
      function next(){ i=(i+1)%pool.length; renderItem(); updateCounter(); }
      function prev(){ i=(i-1+pool.length)%pool.length; renderItem(); updateCounter(); }
      function updateCounter(){ document.getElementById('counter').textContent = `${i+1} / ${pool.length}`; }

      document.getElementById('reveal').addEventListener('click', reveal);
      document.getElementById('next').addEventListener('click', next);
      document.getElementById('prev').addEventListener('click', prev);
      renderItem(); updateCounter();
    }

    function renderSurvival(ex){
      // Build question pool: each item = {contextText, correct: your line text, wrong: decoy}
      const yourLines = ex.flatMap(b=>b.yours);
      const contexts = ex.map(b=>b.context.map(l=>`${l.speaker}: ${l.text}`).join(' '));
      const pool = [];
      for (let idx=0; idx<yourLines.length; idx++){
        const correct = yourLines[idx];
        // create decoy: choose a random your line with similar length (¬±30%)
        const targetLen = (correct.text||'').length || 1;
        const candidates = yourLines.filter(l=>Math.abs((l.text||'').length - targetLen) <= targetLen*0.3 && l!==correct);
        const decoy = candidates.length ? sample(candidates) : sample(yourLines);
        pool.push({
          context: contexts[Math.min(ex.length-1, Math.floor(idx / Math.max(1, Math.floor(yourLines.length/ex.length))))] || '',
          correct: correct,
          wrong: decoy
        });
      }
      if (!pool.length){ root.innerHTML = '<div class="card">Keine Daten</div>'; return; }
      let i = Math.floor(Math.random()*pool.length);
      if (HEARTS<=0){ HEARTS=3; SCORE=0; } // reset if needed
      updateHUD();

      function ask(){
        const q = pool[i];
        statsPill.textContent = `√úberleben: Frage ${SCORE+1}`;
        root.innerHTML='';
        const card = el('div',{class:'card'});
        const head = el('div',{class:'faded'},'W√§hle die korrekte Antwort');
        const ctx = el('div',{class:'faded'}, q.context ? `Kontext: ${q.context.substring(0,140)}‚Ä¶` : '‚Äî');
        const prompt = el('div',{class:'big'}, `${q.correct.speaker}: ?`);
        const choices = el('div',{class:'choices'});

        // Prepare two options (randomize order)
        const opts = Math.random()<0.5 ? [q.correct, q.wrong] : [q.wrong, q.correct];
        opts.forEach((opt, idx)=>{
          const btn = el('button',{class:'primary'}, (opt.text||'').replace(/\n/g,' '));
          btn.addEventListener('click', ()=>{
            if (opt===q.correct){
              SCORE++; updateHUD();
              try { confetti({ particleCount: 60, spread: 60, startVelocity: 25, origin: {y: .25} }); } catch {}
              next();
            } else {
              HEARTS--; updateHUD();
              btn.style.background = '#7a2231'; // red-ish
              btn.style.color = '#fff';
              if (HEARTS<=0){
                gameOver();
              } else {
                // show correction quickly
                const corr = el('div',{class:'faded'}, `Richtig w√§re: ${q.correct.text}`);
                card.appendChild(corr);
                setTimeout(next, 900);
              }
            }
          });
          choices.appendChild(btn);
        });

        card.append(head, ctx, prompt, choices);
        root.appendChild(card);
      }

      function next(){
        // endless: pick new random question
        i = Math.floor(Math.random()*pool.length);
        ask();
      }
      function gameOver(){
        root.innerHTML='';
        const over = el('div',{class:'card'},
          el('div',{class:'big'}, `Game Over ‚Äì Score: ${SCORE}`),
          el('div',{class:'faded'}, 'Tippe auf ‚ÄûNeu starten‚Äú'),
          el('button',{class:'primary', id:'restart'},'Neu starten')
        );
        root.appendChild(over);
        document.getElementById('restart').addEventListener('click', ()=>{ HEARTS=3; SCORE=0; updateHUD(); ask(); });
      }

      ask();
    }

    function render(){
      const data = window.__SCRIPT || {items:[]};
      const role = roleSel.value;
      const ex = buildExchanges(data.items||[], role);
      const N = Math.max(1, Math.min(25, parseInt(sessionSize.value||'5',10)||5));
      const page = Math.max(0, parseInt(q.get('page')||'0',10)||0);
      // Stats
      statsPill.textContent = `${ex.length} Bl√∂cke`;

      if (MODE==='classic') renderClassic(ex, N, page);
      else if (MODE==='flash') renderFlash(ex);
      else if (MODE==='cloze') renderCloze(ex);
      else if (MODE==='survival') renderSurvival(ex);
    }

    function attachControls(data){
      // init roles
      const roles = groupRoles(data);
      roleSel.innerHTML = roles.map(r=>`<option value="${r}">${r}</option>`).join('');
      roleSel.value = (q.get('role') && roles.includes(norm(q.get('role')))) ? norm(q.get('role')) : (roles[0]||'SEYMOUR');
      sessionSize.value = Math.max(1, Math.min(25, parseInt(q.get('n')||'5',10)||5));
      toggleStage.value = (q.get('stage')==='on') ? 'on' : 'off';

      roleSel.onchange = ()=>{ const p=new URLSearchParams(location.search); p.set('role', roleSel.value); p.set('page','0'); history.replaceState(null,'',`?${p.toString()}`); render(); };
      sessionSize.onchange = ()=>{ const p=new URLSearchParams(location.search); p.set('n', sessionSize.value); p.set('page','0'); history.replaceState(null,'',`?${p.toString()}`); render(); };
      startBtn.onclick = ()=>{ const p=new URLSearchParams(location.search); p.set('page','0'); history.replaceState(null,'',`?${p.toString()}`); render(); };
      shareBtn.onclick = async ()=>{
        const p=new URLSearchParams(location.search); p.set('mode', MODE);
        history.replaceState(null,'',`?${p.toString()}`);
        try{ await navigator.clipboard.writeText(location.href); shareBtn.textContent='Link kopiert!'; setTimeout(()=>shareBtn.textContent='Link teilen',1200);}catch{ alert(location.href); }
      };

      // Init mode by query if present
      if (q.get('mode')) setMode(q.get('mode')); else setMode(MODE);
    }

    (async ()=>{
      try{
        const res = await fetch(jsonSrc, {cache:'no-store'});
        const j = await res.json();
        window.__SCRIPT = j;
        attachControls(j);
        render();
      }catch(e){
        document.getElementById('root').innerHTML = '<div class="exchange">Fehler beim Laden der JSON.</div>';
      }
    })();
  </script>
</body>
</html>
